Доопрацювання ФС ПРРО.

11.12.2023
1. Зміст оновлення
1.1. Додано тип DGUKTZED.

24.11.2023
1. Зміст оновлення
1.1. Оновлення прикладів
Зміст оновлення
- додано типи оплат «Часткова сплата»:
«Часткова сплата - остаточний розрахунок»;
«Часткова сплата – передплата»;
«Часткова сплата - чергова сплата»;
«Часткова сплата - повернення остаточного розрахунку»;
«Часткова сплата - повернення передплата»;
«Часткова сплата - повернення чергова сплата».
1.2. Оновлення XSD схем
- додано контролі для типу оплати «Часткова сплата».

06.10.2023
1. Зміст оновлення
1.1. В розділ «Відкликання останнього онлайн чека» додано текст: «Примітка. Зазначений порядок стосується лише фінансово значущих документів».

29.08.2023
1. Зміст оновлення
1.1. Додані параметри команд:
Загальні параметри
Загальні параметри запиту:
{  “Command”: “<Команда>”,
    “UID”: “<Унікальний ідентифікатор запиту>”,
    “Timestamp”: <Час надсилання команди (не обов’язковий)>,
    “Timeout”: <Таймаут дії команди (мсек) (не обов’язковий)>}
При заданих параметрах “Timestamp” та “Timeout”, команда скасовується, якщо поточний час сервера перевищує значення “Timestamp + Timeout”.
Загальні параметри відповіді:
{  “UID”: “<Унікальний ідентифікатор запиту>”,
    “Timestamp”: <Час надсилання відповіді>}

18.08.2023
1. Зміст оновлення
1.1. Запит чека – “Command”:”Check”
1.2. Запит чека розширений – “Command”:”CheckExt”
1.3. Запит Z-звіту – “Command”:”ZRep”
1.4. Запит Z-звіту розширений – “Command”:”ZRepExt”
2. Додано параметр “SetTimestamp”:<Ознака встановлення позначки часу на КЕП Фіскального Сервера (false/true)>

14.06.2023
1. Зміст оновлення
1.1. Доповнено опис команди «Запит чека розширений». Додано можливість запиту посилання на сторінку візуалізації чека в Електронному кабінеті платника податків

09.02.2023
1. Зміст оновлення
1.1 Уточнення результату виконання команди «Запит стану ПРРО»

15.05.2022
1. Зміст оновлення
1.1. До всіх команд і відповідей додано параметр “UID”: “Унікальний ідентифікатор запиту”

11.02.2022
1. Зміст оновлення
1.1. В структуру інформації об'єкта оподаткування TaxObjectItem додано елемент public long TaxObjId {get; set;} // Код запису ОО

27.01.2022
1. Зміст оновлення
1.1. До структури TaxObjectItem додано елемент ChiefCashier

20.01.2022
1. Зміст оновлення
1.1. До запису «TaxObjectItem» додано поле
Public string TaxOdjGuid {get; set; } // Ідентифікатор запису ОО

05.01.2022
1. Зміст оновлення
1.1. Команда "Запит стану ПРРО" (TransactionsRegistrarState)
У відповідь додано поле
OfflineSessionRolledBack = <Ознака здійснення відміни закриття офлайн сесії (false/true) (null – режим офлайн заборонений для ПРРО)>
1.2. Команда "Запит переліку змін за період" (Shifts)
У відповідь додано поле
Testing = <Ознака зміни, що містить тестові документи (false/true)>
1.3. Команда "Запит підсумків останньої зміни" (LastShiftTotals)
У відповідь додані поля
Testing = <Ознака зміни, що містить тестові документи (false/true)>,
Opened = <Дата і час відкриття зміни>,
OpenName = <П.І.Б. оператора, що відкрив зміну>,
OpenSubjectKeyId = <Ідентифікатор ключа суб’єкта сертифікату оператора>,
Closed = <Дата і час закриття зміни>,
CloseName = <П.І.Б. оператора, що закрив зміну>,
CloseSubjectKeyId = <Ідентифікатор ключа суб’єкта сертифікату оператора>,
ZRepFiscalNum = <Фіскальний номер Z-звіту>

16.09.2021
1. Зміст оновлення
1.1. Додано адресу доступу до ФСКО за протоколом HTTPS.

04.09.2021
1. Зміст оновлення
1.1. Додані блокування під час зчитування даних ПРРО, зміни тощо.
1.2. В структуру відповідей на команди додано поле public string UID {get; set;} // Унікальний ідентифікатор відповіді.

07.08.2021
1. Зміст оновлення
1.1. Додано розділ «Тривалість офлайн сесії».

08.07.2021
1. Зміст оновлення
1.1. ФС ПРРО 1.0.2.2100
Додано поля Z-звіту
 <!--Загальна сума переказів (15.2 цифри)-->
 <xs:element name="TOTALCURRENCYSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
1.2. XSD схеми (xsd.zip)
zrep01.xsd
Додано елементи
 <!--Загальна сума переказів (15.2 цифри)-->
 <xs:element name="TOTALCURRENCYSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
1.3. Приклади (приклади.zip)
Оновлено приклади з новими елементами.
1.4. Опис АРІ Фіскального Сервера (Єдине вікно подання електронної звітності) Версія від 08.07.2021 "ФС ПРРО - Опис системи.docx"
Оновлено розділ "Запит підсумків останньої зміни".
2. Підстава оновлення
2.1. "Технологія зберігання і збору даних РРО для ДПC.
Протокол передачі інформації Версія 2.1.9 Редакція  1.4"
"Додано атрибути DB, DC тегу <P> та QSO, QSMI, QSMO тегу <OP>.
Додано приклад Z звіту операції переказу коштів для РРО загального призначення"

30.06.2021
1. Зміст оновлення
1.1. ФС ПРРО 1.0.2.2068
Додано окремі підсумки фіскальних чеків типу "Чек обслуговування у ломбарді"
1.2. XSD схеми (xsd.zip)
1.2.1. check01.xsd
Додано елементи
<!--Загальна сума коштів, виданих клієнту ломбарда (15.2 цифри) (наприклад, 1000.00)-->
<xs:element name="PWNSUMISSUED" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
<!--Загальна сума коштів, одержаних від клієнта ломбарда (15.2 цифри) (наприклад, 1000.00)-->
<xs:element name="PWNSUMRECEIVED" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
1.2.2. zrep01.xsd
Додано елементи
<!--Загальна сума коштів, виданих клієнту ломбарда (15.2 цифри)-->
<xs:element name="PWNSUMISSUED" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
<!--Загальна сума коштів, одержаних від клієнта ломбарда (15.2 цифри)-->
<xs:element name="PWNSUMRECEIVED" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
1.3. Приклади (приклади.zip)
Оновлено приклади з новими елементами.

04.06.2021
1. Зміст оновлення
1.1. Додано підтримку фіскальних чеків типу "Чек обслуговування у ломбарді"
1.2. XSD схеми (xsd.zip)
check01.xsd
- Елемент
       <!--Тип документа (числовий):
       0-Чек реалізації товарів/послуг, 1-Чек переказу коштів, 2–Чек операції обміну валюти, 3-Чек видачі готівки, 4-Чек обслуговування у ломбарді, 100-Відкриття зміни, 101-Закриття зміни, 102-Початок офлайн сесії, 103-Завершення офлайн сесії-->
       <xs:element name="DOCTYPE" type="xs:nonNegativeInteger" minOccurs="1" maxOccurs="1"/>
Додано тип "4-Чек обслуговування у ломбарді"
- Елемент <xs:complexType name="TROWSBODY">
Додано елемент
<!--Ломбард-->
<!--Напрямок руху коштів: видано клієнту (false)/одержано від клієнта (true)-->
<xs:element name="PWNDIR" type="xs:boolean" minOccurs="0" maxOccurs="1"/>
1.3. Приклади (приклади.zip)
- Додано приклад "check01(Ломбард).xml"


06.05.2021
XSD-схеми (xsd.zip)
1. check01.xsd
1.1. Тип DGLetter – виправлено розмір з 3 на 1.
1.2. Елемент DISCOUNTTAX – виправлено тип з LetterColumn на TaxColumn.


22.03.2021
1. XSD-схеми (doc\xsd.zip)
1.1. check01.xsd
В розділи
       <!--Платіжні системи-->
       <xs:complexType name="CPaySys">
і
       <!--Реквізити програмно-технічного комплексу самообслуговування (ПТКС)-->
       <xs:complexType name="CPtks">
додано елементи
       <!--POS-термінал. Дата та час транзакції (ддммррррггххсс)-->
       <xs:element name="POSTRANSDATE" type="DateTimeColumn" minOccurs="0" maxOccurs="1"/>
       <!--POS-термінал. Номер чека транзакції (128 символів)-->
       <xs:element name="POSTRANSNUM" type="Str128Column" minOccurs="0" maxOccurs="1"/>
2. Приклади (doc\приклади.zip)
2.1. Додано приклад пакету офлайн документів.
2.2. Архів "приклади.zip" містить папки
     - приклади
     - приклади з КЕП
     - приклад офлайн пакету

15.02.2021
1. Зміст оновлення
1.1. Z-звіт. В розділ "Підсумки реалізації і повернення" додані елементи
<!--Заокруглення (15.2 цифри) (наприклад, 0.71)-->
<xs:element name="RNDSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
<!--Загальна сума без заокруглення (15.2 цифри) (наприклад, 1000.71)-->
<xs:element name="NORNDSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
2. "ФС ПРРО - Опис системи.docx" від 15.02.2021
2.1. Проведені зміни ФСКО (п.1)
2.2. Додано
/// <summary>
///     Підсумки по типу чека
/// </summary>
public class ShiftTotalsOrderType {
/// <summary>
///     Заокруглення (наприклад, 0.71)
/// </summary>
public decimal RndSum { get; set; }
/// <summary>
///     Загальна сума без заокруглення (наприклад, 1000.71)
/// </summary>
public decimal NoRndSum { get; set; }
3. xsd.zip
3.1. Z-звіт. В розділ "Підсумки реалізації і повернення" додані елементи
<!--Заокруглення (15.2 цифри) (наприклад, 0.71)-->
<xs:element name="RNDSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
<!--Загальна сума без заокруглення (15.2 цифри) (наприклад, 1000.71)-->
<xs:element name="NORNDSUM" type="DGDecimal2" minOccurs="0" maxOccurs="1"/>
4. Клієнт Windows 1.0.2.1524
4.1. Документація. Додано інформацію щодо використання клавіатурного сканера.

09.02.2021
1. Зміст оновлення
1.1. API. Додано команду "Запит переліку операторів (касирів) для суб’єкта господарювання";
1.2. Додано контроль надсилання онлайн документів у разі відкритої офлайн сесії.

06.02.2020
1. Зміст оновлення
  - API. Додано команду "Запит Z-звіту розширений"
2. API. Команда "Запит доступних об'єктів" в структуру "TaxObjectItem" додано поле bool SingleTax // Ознака ФОП – платника єдиного податку
3. API. Команда "Запит стану ПРРО" додано можливість запиту Відомостей об’єкту оподаткування (TaxObjectItem). В структуру запиту додано поле “IncludeTaxObject”: <Ознака запиту відомостей об’єкту оподаткування (false/true) (не обов’язковий)>. В структуру відповіді додано поле TaxObject = <Відомості об’єкту оподаткування (TaxObjectItem)>.
4. API. Команда "Запит переліку змін за період" в структуру відповіді додані поля CloseShiftFiscalNum = <Фіскальний номер документа “Закриття зміни”> ZRepFiscalNum = <Фіскальний номер Z-звіту>
5. API. Команда "Запит переліку документів зміни" в структуру відповіді додано поле DocDateTime = <Дата і час операції, зафіксованої документом>
6. Приклади - "приклади.zip"
6.1. Додано приклади
  - check01(Валюта службова видача).xml
  - check01(Валюта підкріплення).xml
  - check01(Валюта службове внесення).xml

04.01.2021
1. Зміст оновлення
  Додано типи
  - DGDate - "Загальний тип "Дата у форматі ддммрррр""
  - DGTime - "Загальний тип "Час у форматі ггххсс""
  - DGDateTime - "Загальний тип "Дата і час у форматі ддммррррггххсс""

10.12.2020
1. Зміст оновлення
- Схема check01.xsd
До розділу "Платіжні системи" ("CPaySys") додано елемент
<!--Сума оплати (15.2 цифри)-->
<xs:element name="SUM" type="Decimal2Column" minOccurs="0" maxOccurs="1"/>

03.12.2020
1. Зміст оновлення
- Виправлено перевірку підсумків за формами оплати

02.12.2020
1. Зміст оновлення
- Змінено опис поля <!--Код форми оплати (числовий): 0–Готівка, 1–Банківська картка, 2-Попередня оплата, 3-Кредит, ...-->
<xs:element name="PAYFORMCD" type="xs:nonNegativeInteger" minOccurs="1" maxOccurs="1"/>
<!--Найменування форми оплати (128 символів)-->
<xs:element name="PAYFORMNM" type="StrColumn" minOccurs="1" maxOccurs="1"/>
- Змінено тип поля <!--Курс операції (ХХХХ.ХХХХХХХХ)--> <xs:element name="VALCOURSE" type="Decimal8Column_R" minOccurs="0" maxOccurs="1"/>
- Доповнено вимоги щодо накладання позначки часу
- Доповнено розділ "Розрахунок контрольного числа"

23.11.2020
1. Зміст оновлення
- Виправлено відкриття посилань на ЕКП
- Виправлено відображення часу реєстрації документа

16.11.2020
1. Зміст оновлення
- Додано поля <!—Коментар--> <xs:element name=”COMMENT” type=”xs:string” minOccurs=”0” maxOccurs=”1”/> в елементи “CHead” і “CBody”

12.11.2020
1. Зміст оновлення
- Оновлені системні бібліотеки
- Виправлені повідомлення про помилки

04.11.2020
1. Зміст оновлення
- Виправлено обробку команди
///<summary>
/// Розширений запит чека
///</summary>
CheckExt
03.11.2020
1. Зміст оновлення
- Підсумки зміни
- Додано контроль значення поля public double SourceSum { get; set; } // Вихідна сума для розрахування податку/збору

31.10.2020
1. Зміст оновлення
- Запит Підсумки зміни
- Додано поле public double SourceSum { get; set; } // Вихідна сума для розрахування податку/збору

22.10.2020
1. Зміст оновлення
- Виправлено check01.xsd <!-Код валюти виданої (числовий)--> <xs:element name=”VALOUTCD” type=”PositiveIntegerColumn” minOccurs=”0” maxOccurs=”1”>
- Відповідно виправлено приклади

07.10.2020
1. Зміст оновлення
- Виправлено неточність «Дата документа» (ДДММРР) виправлено на «Дата документа» (ДДММРРРР)

02.10.2020
1. Зміст оновлення
- У відповідь на запит стану ПРРО додано поле CLOSED = <Ознака скасованої реєстрації ПРРО>

24.09.2020
1. Зміст оновлення
- Розширення діагностики
- Тип поля VALCD "Код валюти" змінено на числовий (PositiveInteger)

21.09.2020

1. Оновлення програмних модулів "Фіскальний Сервер ПРРО 1.0.1.779"
Зміст оновлення
- Візуалізація чеків. Додані поля
  CHECKHEAD/OPERTYPENM
  CHECKHEAD/VEHICLERN
- Виправлено помилку відображення статистики

2. Оновлення XSD схем
Зміст оновлення
- check01.xsd
-- Додано поле
   <!--Найменування типу операції (128 символів)-->
   <xs:element name="OPERTYPENM" type="DGStr128" minOccurs="0" maxOccurs="1"/>
- zrep01.xsd
  VALKKCD -> VALCRCD

09.09.2020

1. Оновлення програмних модулів "Фіскальний Сервер ПРРО 1.0.0.709"
Зміст оновлення
- Виправлення помилок
- Доопрацьовано обробку чеків типу "2–Чек операції обміну валюти"

2. Оновлення прикладів
Зміст оновлення
- Уточнення формулювань
- Виправлення помилок

3. Оновлення документації
Зміст оновлення
- Уточнення формулювань
- Виправлення помилок
- В розділ "Структура об’єкту підсумків зміни" додано "Підсумки операцій з іноземною валютою"

4. Оновлення XSD схем
Зміст оновлення
- Уточнення формулювань
- Виправлення помилок
- Доопрацьовано обробку чеків типу "2–Чек операції обміну валюти"
- Додано підтримку акцизних марок

5. Доопрацювання XSD схем
5.1. check01.xsd
Додано елемент
<!--Акцизні марки-->
<xs:element name="EXCISELABELS" type="CExciseLabels" minOccurs="0" maxOccurs="1"/>
5.2. zrep01.xsd
Зміни в розділі ZVal:
TOTALCALCDOC -> CALCDOCSCNT
TRANSFERCNT -> TRANSFERSCNT

20.08.2020

1. Оновлення документації
Зміст оновлення
- Додано приклад розрахунку контрольного числа для номерів офлайн документів
У документі зазначено "Версія від 20.08.2020".

18.08.2020

1. Оновлення програмних модулів "Фіскальний Сервер ПРРО 1.0.0.616"
Зміст оновлення
- Доповнено відображення статистики
Додано кількість відмов сервера позначки часу

07.08.2020

1. Оновлення програмних модулів "Фіскальний Сервер ПРРО 1.0.0.532"
Зміст оновлення
- Виправлення помилок
- Додано операції
-- "Одержання відомостей щодо завершених змін"
-- "Одержання відомостей щодо офлайн сесій"

2. Оновлення прикладів
Зміст оновлення
- Уточнення формулювань
- Виправлення помилок

3. Оновлення XSD схем
Зміст оновлення
- Уточнення формулювань
- Виправлення помилок

05.08.2020

1. Оновлення програмних модулів "Фіскальний Сервер ПРРО 1.0.0.522"
Зміст оновлення
- Виправлення обробки підсумків для ПТКС

2. Оновлення документації
Зміст оновлення
- Уточнення формулювань
- Виправлення орфографічних помилок

3. Оновлення XSD схем
Зміст оновлення
- Уточнення формулювань коментарів
- Виправлення орфографічних помилок коментарів

